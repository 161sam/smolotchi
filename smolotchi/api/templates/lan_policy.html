{% extends "layout.html" %}
{% block page_title %}LAN Policy{% endblock %}
{% block page_sub %}noisy/allowlist scripts{% endblock %}

{% block content %}
<section class="card">
  <div class="row" style="justify-content:space-between; gap:10px; flex-wrap:wrap;">
    <a class="pill" href="{{ url_for('lan') }}">‚Üê Back to LAN</a>
    <a class="pill" href="{{ url_for('lan_results') }}">LAN Results</a>
  </div>
</section>

<section class="card">
  <h3 style="margin:0 0 10px 0">Script suppression</h3>
  <form method="post" action="{{ url_for('lan_policy_save') }}">
    <div class="row" style="gap:12px; align-items:flex-start; flex-wrap:wrap;">
      <div style="flex:1; min-width:320px;">
        <div class="muted">noisy_scripts (one per line)</div>
        <textarea name="noisy" spellcheck="false"
          style="width:100%; min-height:40vh; resize:vertical; background:#0f1722; color:#e7eef7; border:1px solid rgba(255,255,255,.10); border-radius:14px; padding:12px; font-family: ui-monospace,monospace; font-size:12px; line-height:1.4;"
        >{{ noisy }}</textarea>
      </div>
      <div style="flex:1; min-width:320px;">
        <div class="muted">allowlist_scripts (overrides noisy)</div>
        <textarea name="allow" spellcheck="false"
          style="width:100%; min-height:40vh; resize:vertical; background:#0f1722; color:#e7eef7; border:1px solid rgba(255,255,255,.10); border-radius:14px; padding:12px; font-family: ui-monospace,monospace; font-size:12px; line-height:1.4;"
        >{{ allow }}</textarea>
      </div>
    </div>

    <div class="row" style="justify-content:flex-end; gap:10px; margin-top:12px; flex-wrap:wrap;">
      <button class="btn" type="submit">Save</button>
      <button class="btn" type="submit" formaction="{{ url_for('lan_policy_save_reload') }}" formmethod="post">Save + Reload</button>
      <button class="secondary" type="submit" formaction="{{ url_for('config_reload') }}" formmethod="post">Reload config</button>
    </div>
  </form>
</section>
{% endblock %}
