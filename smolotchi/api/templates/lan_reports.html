{% extends "layout.html" %}
{% block page_title %}LAN Reports{% endblock %}
{% block page_sub %}HTML reports{% endblock %}

{% block content %}
<section class="card">
  {% include "partials/back_to_lan.html" %}
</section>

<section class="card">
  <div class="events">
    {% for a in items %}
      <div class="evt">
        <div class="evt-top">{{ a.title }}</div>
        <div class="muted">id: {{ a.id }}</div>
        {% if a.bundle_id %}
          <div class="muted">bundle_id: {{ a.bundle_id }}</div>
        {% endif %}
        {% if a.job_id %}
          <div class="muted">job_id: {{ a.job_id }}</div>
        {% endif %}
        <div style="margin-top:10px" class="row">
          <a href="{{ url_for('report_view', artifact_id=a.id) }}" style="color:var(--accent); text-decoration:none; font-weight:900;">Open</a>
          <a href="{{ url_for('artifact_file_download', artifact_id=a.id) }}" style="color:var(--accent); text-decoration:none; font-weight:900;">Download</a>

          {% if a.bundle_id %}
            <a href="{{ url_for('lan_result_details', bundle_id=a.bundle_id) }}" style="color:var(--accent); text-decoration:none; font-weight:900;">Result details</a>
            <a href="{{ url_for('artifact_download', artifact_id=a.bundle_id) }}" style="color:var(--accent); text-decoration:none; font-weight:900;">Bundle JSON</a>
          {% elif a.job_id %}
            <a href="{{ url_for('lan_result_by_job') }}?job_id={{ a.job_id }}" style="color:var(--accent); text-decoration:none; font-weight:900;">Result details</a>
          {% endif %}

          {% if a.diff_html_id %}
            <a href="{{ url_for('report_view', artifact_id=a.diff_html_id) }}" style="color:var(--accent); text-decoration:none; font-weight:900;">Diff (HTML)</a>
          {% endif %}
          {% if a.diff_md_id %}
            <a href="{{ url_for('report_view', artifact_id=a.diff_md_id) }}" style="color:var(--accent); text-decoration:none; font-weight:900;">Diff (MD)</a>
          {% endif %}
          {% if a.diff_json_id %}
            <a href="{{ url_for('artifact_download', artifact_id=a.diff_json_id) }}" style="color:var(--accent); text-decoration:none; font-weight:900;">Diff (JSON)</a>
          {% endif %}
        </div>
      </div>
    {% else %}
      <div class="muted">No reports yet.</div>
    {% endfor %}
  </div>
</section>
{% endblock %}
