{% extends "layout.html" %}
{% block page_title %}LAN Reports{% endblock %}
{% block page_sub %}HTML reports{% endblock %}

{% block content %}
<section class="card">
  {% include "partials/back_to_lan.html" %}
</section>

<section class="card">
  <div class="events">
    {% for a in items %}
      <div class="evt">
        <div class="evt-top">{{ a.title }}</div>
        <div class="muted">id: {{ a.id }}</div>
        {% if a.bundle_id %}
          <div class="muted">bundle_id: {{ a.bundle_id }}</div>
        {% endif %}
        {% if a.job_id %}
          <div class="muted">job_id: {{ a.job_id }}</div>
        {% endif %}
        <div class="btn-row mt-md">
          <a class="btn" href="{{ url_for('report_view', artifact_id=a.id) }}">Open</a>
          <a class="btn secondary" href="{{ url_for('artifact_file_download', artifact_id=a.id) }}">Download</a>

          {% if a.bundle_id %}
            <a class="btn secondary" href="{{ url_for('lan_result_details', bundle_id=a.bundle_id) }}">Result details</a>
            <a class="btn secondary" href="{{ url_for('artifact_download', artifact_id=a.bundle_id) }}">Bundle JSON</a>
          {% elif a.job_id %}
            <a class="btn secondary" href="{{ url_for('lan_result_by_job') }}?job_id={{ a.job_id }}">Result details</a>
          {% endif %}

          {% if a.diff_html_id %}
            <a class="btn secondary" href="{{ url_for('report_view', artifact_id=a.diff_html_id) }}">Diff (HTML)</a>
          {% endif %}
          {% if a.diff_md_id %}
            <a class="btn secondary" href="{{ url_for('report_view', artifact_id=a.diff_md_id) }}">Diff (MD)</a>
          {% endif %}
          {% if a.diff_json_id %}
            <a class="btn secondary" href="{{ url_for('artifact_download', artifact_id=a.diff_json_id) }}">Diff (JSON)</a>
          {% endif %}
        </div>
      </div>
    {% else %}
      <div class="empty">
        <div><strong>No reports yet.</strong></div>
        <div class="muted">Run a LAN job to generate HTML and diff reports.</div>
        <div class="btn-row mt-md">
          <a class="btn" href="{{ url_for('lan') }}">Run LAN job</a>
          <a class="btn secondary" href="{{ url_for('lan_results') }}">View Results</a>
        </div>
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
